<!DOCTYPE html>
<html>
<head>
    <title>WebRTC Video Stream</title>
</head>
<body>
    <video id="video" autoplay playsinline></video>
    <script>
        const pc = new RTCPeerConnection();

        pc.ontrack = function(event) {
            document.getElementById('video').srcObject = event.streams[0];
        };

        fetch('/offer', {method: 'POST'})
            .then(res => res.json())
            .then(async offer => {
                await pc.setRemoteDescription(new RTCSessionDescription(offer));
                const answer = await pc.createAnswer();
                await pc.setLocalDescription(answer);
                fetch('/answer', {
                    method: 'POST',
                    body: JSON.stringify({
                        sdp: pc.localDescription.sdp,
                        type: pc.localDescription.type
                    })
                });
            });
    </script>
</body>
</html>
